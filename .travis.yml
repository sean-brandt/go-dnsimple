---
language: go
sudo: false
notifications:
  email: false

matrix:
  include:
    - os: linux
      go: 1.7.x
    - os: linux
      go: 1.8.x
    - os: linux
      go: tip
    - os: osx
      go: 1.8.x
    - os: osx
      go: tip

env:

go:
  - 1.7.x
  - 1.8.x
  - master

install:
  - go get -u github.com/golang/dep/cmd/dep
  - dep ensure
  - dep status

before_script:
  - go get -v honnef.co/go/tools/cmd/{gosimple,staticcheck,megacheck}
  - go get github.com/mitchellh/gox

script:
  - go test -v .
  - megacheck .

after_success:
  - go get -u github.com/sean-brandt/gox
  - gox -os "linux darwin windows" -arch '!mipslpe !s390x !ppc64' -osarch '!darwin/arm !darwin/arm64'
